# Tunnox 客户端配置示例
# 使用方法：复制为 client-config.yaml 并修改相关参数

# ============================================
# 认证凭据（首次连接后自动填充）
# ============================================
# 首次连接时，服务端会自动分配 client_id 和 secret_key
# 凭据会自动保存到此配置文件
#
# 重要安全说明（V3 协议）：
# - secret_key 只在首次分配时显示一次，请妥善保存
# - secret_key 使用挑战-响应认证，永不在网络上传输
# - 如果丢失 secret_key，需要联系管理员重置凭据
# - 凭据重置后，旧的 secret_key 将立即失效

client_id: 0          # 客户端 ID（服务端分配，8位数字）
secret_key: ""        # 认证密钥（服务端分配，只显示一次）

# ============================================
# 服务器配置
# ============================================
server:
  address: "localhost:7000"  # 服务器地址
  protocol: "tcp"            # 连接协议：tcp/websocket/quic/kcp

# ============================================
# 日志配置（可选）
# ============================================
log:
  level: "info"              # 日志级别：debug/info/warn/error
  format: "text"             # 日志格式：text/json
  output: "file"             # 输出目标：stdout/stderr/file
  file: "~/.tunnox/client.log"  # 日志文件路径（当output=file时）

# ============================================
# 配置说明
# ============================================
# 1. 首次连接：
#    - 启动客户端，连接到服务器
#    - 服务端自动分配 client_id 和 secret_key
#    - 凭据自动保存到此配置文件
#    - secret_key 只显示一次，请记录保存
#
# 2. 后续连接：
#    - 使用保存的 client_id 和 secret_key 自动认证
#    - 采用挑战-响应协议，secret_key 不在网络传输
#
# 3. 凭据丢失：
#    - 联系管理员重置凭据
#    - 重置后会获得新的 secret_key（只显示一次）
#    - 更新配置文件中的 secret_key
#
# 4. 认证失败处理：
#    - 客户端会直接退出（退出码 10）
#    - 不会自动重连，避免无效重试
#    - 请检查 client_id 和 secret_key 是否正确
#
# 5. 端口映射：
#    - 无需在配置文件中手动配置
#    - 所有映射由云控平台统一管理
#    - 客户端连接成功后自动接收配置

